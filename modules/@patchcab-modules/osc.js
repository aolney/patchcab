import{Faceplate as t,Knob as e,Switch as n,Patch as _}from"/js/core.js";function s(t){let s,o,c,i,v,p,u,l,$,m,f,d,y,g,b,q,h,x,w,k,C,S;function j(e){t[4](e)}let M={label:"frequency",x:20,y:60,min:a,max:r,steps:500};function O(e){t[5](e)}void 0!==t[0].freq&&(M.value=t[0].freq),s=new e({props:M}),__sv.binding_callbacks.push((()=>__sv.bind(s,"value",j)));let T={size:"s",label:"fm",x:27,y:150,min:.01,max:1,precision:2};function z(e){t[6](e)}void 0!==t[0].fm&&(T.value=t[0].fm),i=new e({props:T}),__sv.binding_callbacks.push((()=>__sv.bind(i,"value",O)));let A={x:20,y:220,label:"sin",set:"sine"};function B(e){t[7](e)}void 0!==t[0].type&&(A.value=t[0].type),u=new n({props:A}),__sv.binding_callbacks.push((()=>__sv.bind(u,"value",z)));let D={x:60,y:220,label:"sqr",set:"square"};function E(e){t[8](e)}void 0!==t[0].type&&(D.value=t[0].type),m=new n({props:D}),__sv.binding_callbacks.push((()=>__sv.bind(m,"value",B)));let F={x:20,y:270,label:"tri",set:"triangle"};function G(e){t[9](e)}void 0!==t[0].type&&(F.value=t[0].type),y=new n({props:F}),__sv.binding_callbacks.push((()=>__sv.bind(y,"value",E)));let H={x:60,y:270,label:"saw",set:"sawtooth"};return void 0!==t[0].type&&(H.value=t[0].type),q=new n({props:H}),__sv.binding_callbacks.push((()=>__sv.bind(q,"value",G))),w=new _({props:{label:"fm",x:20,y:320,name:"signal-in",input:t[2],onConnect:t[3]}}),C=new _({props:{label:"out",x:60,y:320,name:"audio-out",output:t[1]}}),{c(){__sv.create_component(s.$$.fragment),c=__sv.space(),__sv.create_component(i.$$.fragment),p=__sv.space(),__sv.create_component(u.$$.fragment),$=__sv.space(),__sv.create_component(m.$$.fragment),d=__sv.space(),__sv.create_component(y.$$.fragment),b=__sv.space(),__sv.create_component(q.$$.fragment),x=__sv.space(),__sv.create_component(w.$$.fragment),k=__sv.space(),__sv.create_component(C.$$.fragment)},m(t,e){__sv.mount_component(s,t,e),__sv.insert(t,c,e),__sv.mount_component(i,t,e),__sv.insert(t,p,e),__sv.mount_component(u,t,e),__sv.insert(t,$,e),__sv.mount_component(m,t,e),__sv.insert(t,d,e),__sv.mount_component(y,t,e),__sv.insert(t,b,e),__sv.mount_component(q,t,e),__sv.insert(t,x,e),__sv.mount_component(w,t,e),__sv.insert(t,k,e),__sv.mount_component(C,t,e),S=!0},p(t,e){const n={};!o&&1&e&&(o=!0,n.value=t[0].freq,__sv.add_flush_callback((()=>o=!1))),s.$set(n);const _={};!v&&1&e&&(v=!0,_.value=t[0].fm,__sv.add_flush_callback((()=>v=!1))),i.$set(_);const a={};!l&&1&e&&(l=!0,a.value=t[0].type,__sv.add_flush_callback((()=>l=!1))),u.$set(a);const r={};!f&&1&e&&(f=!0,r.value=t[0].type,__sv.add_flush_callback((()=>f=!1))),m.$set(r);const c={};!g&&1&e&&(g=!0,c.value=t[0].type,__sv.add_flush_callback((()=>g=!1))),y.$set(c);const p={};!h&&1&e&&(h=!0,p.value=t[0].type,__sv.add_flush_callback((()=>h=!1))),q.$set(p);const $={};4&e&&($.input=t[2]),w.$set($);const d={};2&e&&(d.output=t[1]),C.$set(d)},i(t){S||(__sv.transition_in(s.$$.fragment,t),__sv.transition_in(i.$$.fragment,t),__sv.transition_in(u.$$.fragment,t),__sv.transition_in(m.$$.fragment,t),__sv.transition_in(y.$$.fragment,t),__sv.transition_in(q.$$.fragment,t),__sv.transition_in(w.$$.fragment,t),__sv.transition_in(C.$$.fragment,t),S=!0)},o(t){__sv.transition_out(s.$$.fragment,t),__sv.transition_out(i.$$.fragment,t),__sv.transition_out(u.$$.fragment,t),__sv.transition_out(m.$$.fragment,t),__sv.transition_out(y.$$.fragment,t),__sv.transition_out(q.$$.fragment,t),__sv.transition_out(w.$$.fragment,t),__sv.transition_out(C.$$.fragment,t),S=!1},d(t){__sv.destroy_component(s,t),t&&__sv.detach(c),__sv.destroy_component(i,t),t&&__sv.detach(p),__sv.destroy_component(u,t),t&&__sv.detach($),__sv.destroy_component(m,t),t&&__sv.detach(d),__sv.destroy_component(y,t),t&&__sv.detach(b),__sv.destroy_component(q,t),t&&__sv.detach(x),__sv.destroy_component(w,t),t&&__sv.detach(k),__sv.destroy_component(C,t)}}}function o(e){let n,_;return n=new t({props:{title:"OSC",$$slots:{default:[s]},$$scope:{ctx:e}}}),{c(){__sv.create_component(n.$$.fragment)},m(t,e){__sv.mount_component(n,t,e),_=!0},p(t,[e]){const _={};1031&e&&(_.$$scope={dirty:e,ctx:t}),n.$set(_)},i(t){_||(__sv.transition_in(n.$$.fragment,t),_=!0)},o(t){__sv.transition_out(n.$$.fragment,t),_=!1},d(t){__sv.destroy_component(n,t)}}}const a=40,r=2400;function c(t,e,n){let{state:_={freq:440,type:"sine",fm:1}}=e;const s=new Tone.Oscillator(_.freq,_.type).start(),o=new Tone.Scale(a,r);return t.$$set=t=>{"state"in t&&n(0,_=t.state)},t.$$.update=()=>{1&t.$$.dirty&&n(1,s.frequency.value=_.freq,s),1&t.$$.dirty&&n(1,s.type=_.type,s),1&t.$$.dirty&&n(2,o.min=Math.max(a,_.freq-_.freq*_.fm),o),1&t.$$.dirty&&n(2,o.max=Math.min(r,_.freq+(r-_.freq)*_.fm),o)},[_,s,o,t=>{t?o.connect(s.frequency):(o.disconnect(s.frequency),n(1,s.frequency.overridden=!1,s),n(1,s.frequency.value=_.freq,s))},function(e){t.$$.not_equal(_.freq,e)&&(_.freq=e,n(0,_))},function(e){t.$$.not_equal(_.fm,e)&&(_.fm=e,n(0,_))},function(e){t.$$.not_equal(_.type,e)&&(_.type=e,n(0,_))},function(e){t.$$.not_equal(_.type,e)&&(_.type=e,n(0,_))},function(e){t.$$.not_equal(_.type,e)&&(_.type=e,n(0,_))},function(e){t.$$.not_equal(_.type,e)&&(_.type=e,n(0,_))}]}class i extends __sv.SvelteComponent{constructor(t){super(),__sv.init(this,t,c,o,__sv.safe_not_equal,{state:0})}}export{i as default};
