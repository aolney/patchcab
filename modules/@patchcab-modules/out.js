import{Faceplate as n,onMount as t,Volume as e,Switch as o,Patch as _,isShortcut as s}from"https://olney.ai/patchcab/js/core.js";function a(n){let t,s,a,i,r,v,u,m,l,p;function $(t){n[7](t)}let d={x:24,y:60,h:204,min:n[3],max:c};function f(t){n[8](t)}void 0!==n[0]&&(d.value=n[0]),t=new e({props:d}),__sv.binding_callbacks.push((()=>__sv.bind(t,"value",$)));let g={x:40,y:280,label:"on"};return void 0!==n[1]&&(g.value=n[1]),i=new o({props:g}),__sv.binding_callbacks.push((()=>__sv.bind(i,"value",f))),u=new _({props:{label:"cv",x:20,y:320,name:"cv-1",input:n[4],onConnect:n[5]}}),l=new _({props:{label:"in",x:60,y:320,name:"audio-in",input:n[2]}}),{c(){__sv.create_component(t.$$.fragment),a=__sv.space(),__sv.create_component(i.$$.fragment),v=__sv.space(),__sv.create_component(u.$$.fragment),m=__sv.space(),__sv.create_component(l.$$.fragment)},m(n,e){__sv.mount_component(t,n,e),__sv.insert(n,a,e),__sv.mount_component(i,n,e),__sv.insert(n,v,e),__sv.mount_component(u,n,e),__sv.insert(n,m,e),__sv.mount_component(l,n,e),p=!0},p(n,e){const o={};!s&&1&e&&(s=!0,o.value=n[0],__sv.add_flush_callback((()=>s=!1))),t.$set(o);const _={};!r&&2&e&&(r=!0,_.value=n[1],__sv.add_flush_callback((()=>r=!1))),i.$set(_);const a={};4&e&&(a.input=n[2]),l.$set(a)},i(n){p||(__sv.transition_in(t.$$.fragment,n),__sv.transition_in(i.$$.fragment,n),__sv.transition_in(u.$$.fragment,n),__sv.transition_in(l.$$.fragment,n),p=!0)},o(n){__sv.transition_out(t.$$.fragment,n),__sv.transition_out(i.$$.fragment,n),__sv.transition_out(u.$$.fragment,n),__sv.transition_out(l.$$.fragment,n),p=!1},d(n){__sv.destroy_component(t,n),n&&__sv.detach(a),__sv.destroy_component(i,n),n&&__sv.detach(v),__sv.destroy_component(u,n),n&&__sv.detach(m),__sv.destroy_component(l,n)}}}function i(t){let e,o,_,s,i;return o=new n({props:{title:"OUT",color:"var(--color-dark)",$$slots:{default:[a]},$$scope:{ctx:t}}}),{c(){e=__sv.space(),__sv.create_component(o.$$.fragment)},m(n,a){__sv.insert(n,e,a),__sv.mount_component(o,n,a),_=!0,s||(i=__sv.listen(document.body,"keydown",t[6]),s=!0)},p(n,[t]){const e={};4103&t&&(e.$$scope={dirty:t,ctx:n}),o.$set(e)},i(n){_||(__sv.transition_in(o.$$.fragment,n),_=!0)},o(n){__sv.transition_out(o.$$.fragment,n),_=!1},d(n){n&&__sv.detach(e),__sv.destroy_component(o,n),s=!1,i()}}}const c=2;function r(n,e,o){var _=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(_,s){function a(n){try{c(o.next(n))}catch(n){s(n)}}function i(n){try{c(o.throw(n))}catch(n){s(n)}}function c(n){var t;n.done?_(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,i)}c((o=o.apply(n,t||[])).next())}))};let a=-80,i=!1;const c=new Tone.Gain,r=new Tone.Channel(a).toDestination(),v=new Tone.Scale(0,1);return t((()=>_(void 0,void 0,void 0,(function*(){return c.connect(r),r.mute=!0,()=>{r.dispose()}})))),n.$$.update=()=>{3&n.$$.dirty&&i&&(r.volume.value=a),2&n.$$.dirty&&(n=>{_(void 0,void 0,void 0,(function*(){n&&(yield Tone.start()),r.mute=!n}))})(i)},[a,i,c,-80,v,n=>{n?v.connect(c.gain):(v.disconnect(c.gain),o(2,c.gain.value=1,c))},n=>{s(n)&&"Enter"===n.key&&o(1,i=!i)},function(n){a=n,o(0,a)},function(n){i=n,o(1,i)}]}class v extends __sv.SvelteComponent{constructor(n){super(),__sv.init(this,n,r,i,__sv.safe_not_equal,{})}}export{v as default};
