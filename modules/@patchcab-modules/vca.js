import{Faceplate as n,onMount as t,Volume as e,Patch as o}from"https://olney.ai/patchcab/js/core.js";function _(n){let t,_,s,c,i,r,v,u,m;function $(t){n[6](t)}let p={x:24,y:60,h:204,min:n[3],max:a};return void 0!==n[0].volume&&(p.value=n[0].volume),t=new e({props:p}),__sv.binding_callbacks.push((()=>__sv.bind(t,"value",$))),c=new o({props:{label:"cv",x:40,y:280,name:"cv-1",input:n[4],onConnect:n[5]}}),r=new o({props:{label:"in",x:20,y:320,name:"audio-in",input:n[1]}}),u=new o({props:{label:"out",x:60,y:320,name:"audio-out",output:n[2]}}),{c(){__sv.create_component(t.$$.fragment),s=__sv.space(),__sv.create_component(c.$$.fragment),i=__sv.space(),__sv.create_component(r.$$.fragment),v=__sv.space(),__sv.create_component(u.$$.fragment)},m(n,e){__sv.mount_component(t,n,e),__sv.insert(n,s,e),__sv.mount_component(c,n,e),__sv.insert(n,i,e),__sv.mount_component(r,n,e),__sv.insert(n,v,e),__sv.mount_component(u,n,e),m=!0},p(n,e){const o={};!_&&1&e&&(_=!0,o.value=n[0].volume,__sv.add_flush_callback((()=>_=!1))),t.$set(o);const s={};2&e&&(s.input=n[1]),r.$set(s);const a={};4&e&&(a.output=n[2]),u.$set(a)},i(n){m||(__sv.transition_in(t.$$.fragment,n),__sv.transition_in(c.$$.fragment,n),__sv.transition_in(r.$$.fragment,n),__sv.transition_in(u.$$.fragment,n),m=!0)},o(n){__sv.transition_out(t.$$.fragment,n),__sv.transition_out(c.$$.fragment,n),__sv.transition_out(r.$$.fragment,n),__sv.transition_out(u.$$.fragment,n),m=!1},d(n){__sv.destroy_component(t,n),n&&__sv.detach(s),__sv.destroy_component(c,n),n&&__sv.detach(i),__sv.destroy_component(r,n),n&&__sv.detach(v),__sv.destroy_component(u,n)}}}function s(t){let e,o;return e=new n({props:{title:"VCA",color:"var(--color-dark)",$$slots:{default:[_]},$$scope:{ctx:t}}}),{c(){__sv.create_component(e.$$.fragment)},m(n,t){__sv.mount_component(e,n,t),o=!0},p(n,[t]){const o={};263&t&&(o.$$scope={dirty:t,ctx:n}),e.$set(o)},i(n){o||(__sv.transition_in(e.$$.fragment,n),o=!0)},o(n){__sv.transition_out(e.$$.fragment,n),o=!1},d(n){__sv.destroy_component(e,n)}}}const a=2;function c(n,e,o){var _=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(_,s){function a(n){try{i(o.next(n))}catch(n){s(n)}}function c(n){try{i(o.throw(n))}catch(n){s(n)}}function i(n){var t;n.done?_(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}i((o=o.apply(n,t||[])).next())}))};const s=-80;let{state:a={volume:s}}=e;const c=new Tone.Gain,i=new Tone.Channel(a.volume),r=new Tone.Scale(0,1);return t((()=>_(void 0,void 0,void 0,(function*(){return c.connect(i),o(2,i.mute=!0,i),()=>{r.dispose()}})))),n.$$set=n=>{"state"in n&&o(0,a=n.state)},n.$$.update=()=>{1&n.$$.dirty&&o(2,i.volume.value=a.volume,i)},[a,c,i,s,r,n=>{n?r.connect(c.gain):(r.disconnect(c.gain),o(1,c.gain.value=1,c))},function(t){n.$$.not_equal(a.volume,t)&&(a.volume=t,o(0,a))}]}class i extends __sv.SvelteComponent{constructor(n){super(),__sv.init(this,n,c,s,__sv.safe_not_equal,{state:0})}}export{i as default};
