import{Faceplate as t,Bang as e,Knob as s,Patch as n}from"/js/core.js";function _(t){let e,_,a,o,c,i,r,v,l,u,$,p,m,d,f,g;function y(e){t[3](e)}let b={size:"s",label:"attack",x:27,y:60,min:0,max:2,precision:2,steps:1200};function k(e){t[4](e)}void 0!==t[0].attack&&(b.value=t[0].attack),e=new s({props:b}),__sv.binding_callbacks.push((()=>__sv.bind(e,"value",y)));let h={size:"s",label:"decay",x:27,y:122,min:0,max:2,precision:2,steps:1200};function x(e){t[5](e)}void 0!==t[0].decay&&(h.value=t[0].decay),o=new s({props:h}),__sv.binding_callbacks.push((()=>__sv.bind(o,"value",k)));let w={size:"s",label:"sustain",x:27,y:186,min:0,max:1,precision:2,steps:1e3};function q(e){t[6](e)}void 0!==t[0].sustain&&(w.value=t[0].sustain),r=new s({props:w}),__sv.binding_callbacks.push((()=>__sv.bind(r,"value",x)));let z={size:"s",label:"release",x:27,y:250,min:0,max:5,precision:2,steps:1e3};return void 0!==t[0].release&&(z.value=t[0].release),u=new s({props:z}),__sv.binding_callbacks.push((()=>__sv.bind(u,"value",q))),m=new n({props:{label:"gate",x:20,y:320,name:"gate",input:t[2]}}),f=new n({props:{label:"out",x:60,y:320,name:"cv",output:t[1]}}),{c(){__sv.create_component(e.$$.fragment),a=__sv.space(),__sv.create_component(o.$$.fragment),i=__sv.space(),__sv.create_component(r.$$.fragment),l=__sv.space(),__sv.create_component(u.$$.fragment),p=__sv.space(),__sv.create_component(m.$$.fragment),d=__sv.space(),__sv.create_component(f.$$.fragment)},m(t,s){__sv.mount_component(e,t,s),__sv.insert(t,a,s),__sv.mount_component(o,t,s),__sv.insert(t,i,s),__sv.mount_component(r,t,s),__sv.insert(t,l,s),__sv.mount_component(u,t,s),__sv.insert(t,p,s),__sv.mount_component(m,t,s),__sv.insert(t,d,s),__sv.mount_component(f,t,s),g=!0},p(t,s){const n={};!_&&1&s&&(_=!0,n.value=t[0].attack,__sv.add_flush_callback((()=>_=!1))),e.$set(n);const a={};!c&&1&s&&(c=!0,a.value=t[0].decay,__sv.add_flush_callback((()=>c=!1))),o.$set(a);const i={};!v&&1&s&&(v=!0,i.value=t[0].sustain,__sv.add_flush_callback((()=>v=!1))),r.$set(i);const l={};!$&&1&s&&($=!0,l.value=t[0].release,__sv.add_flush_callback((()=>$=!1))),u.$set(l);const p={};2&s&&(p.output=t[1]),f.$set(p)},i(t){g||(__sv.transition_in(e.$$.fragment,t),__sv.transition_in(o.$$.fragment,t),__sv.transition_in(r.$$.fragment,t),__sv.transition_in(u.$$.fragment,t),__sv.transition_in(m.$$.fragment,t),__sv.transition_in(f.$$.fragment,t),g=!0)},o(t){__sv.transition_out(e.$$.fragment,t),__sv.transition_out(o.$$.fragment,t),__sv.transition_out(r.$$.fragment,t),__sv.transition_out(u.$$.fragment,t),__sv.transition_out(m.$$.fragment,t),__sv.transition_out(f.$$.fragment,t),g=!1},d(t){__sv.destroy_component(e,t),t&&__sv.detach(a),__sv.destroy_component(o,t),t&&__sv.detach(i),__sv.destroy_component(r,t),t&&__sv.detach(l),__sv.destroy_component(u,t),t&&__sv.detach(p),__sv.destroy_component(m,t),t&&__sv.detach(d),__sv.destroy_component(f,t)}}}function a(e){let s,n;return s=new t({props:{title:"ADSR",color:"var(--color-5)",light:!0,$$slots:{default:[_]},$$scope:{ctx:e}}}),{c(){__sv.create_component(s.$$.fragment)},m(t,e){__sv.mount_component(s,t,e),n=!0},p(t,[e]){const n={};131&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n)},i(t){n||(__sv.transition_in(s.$$.fragment,t),n=!0)},o(t){__sv.transition_out(s.$$.fragment,t),n=!1},d(t){__sv.destroy_component(s,t)}}}function o(t,s,n){let{state:_={attack:.5,decay:.1,sustain:.5,release:1}}=s;const a=new Tone.Envelope(_.attack,_.decay,_.sustain,_.release),o=new e(((t,e,s)=>{e&&s?a.triggerAttackRelease(.05,t):e?a.triggerAttack(t):s&&a.triggerRelease(t)}));return t.$$set=t=>{"state"in t&&n(0,_=t.state)},t.$$.update=()=>{1&t.$$.dirty&&n(1,a.attack=_.attack,a),1&t.$$.dirty&&n(1,a.decay=_.decay,a),1&t.$$.dirty&&n(1,a.sustain=_.sustain,a),1&t.$$.dirty&&n(1,a.release=_.release,a)},[_,a,o,function(e){t.$$.not_equal(_.attack,e)&&(_.attack=e,n(0,_))},function(e){t.$$.not_equal(_.decay,e)&&(_.decay=e,n(0,_))},function(e){t.$$.not_equal(_.sustain,e)&&(_.sustain=e,n(0,_))},function(e){t.$$.not_equal(_.release,e)&&(_.release=e,n(0,_))}]}class c extends __sv.SvelteComponent{constructor(t){super(),__sv.init(this,t,o,a,__sv.safe_not_equal,{state:0})}}export{c as default};
